# Sequential Prompt Chaining Configuration
# Senior MHealth AI Service

# ===========================
# Feature Flags
# ===========================
# Enable/disable chaining system
ENABLE_CHAINING=true

# Chaining mode: off | gradual | full
# - off: 체이닝 비활성화
# - gradual: A/B 테스트 모드 (일부 사용자만)
# - full: 전체 사용자에게 적용
CHAINING_MODE=gradual

# Percentage of users to include in chaining (0.0 to 1.0)
# Only used when CHAINING_MODE=gradual
CHAINING_PERCENTAGE=0.1

# ===========================
# Performance Settings
# ===========================
# Cache configuration
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# Timeout settings (seconds)
CRISIS_TIMEOUT=5.0
VOICE_ANALYSIS_TIMEOUT=30.0
TEXT_ANALYSIS_TIMEOUT=20.0
SINCNET_TIMEOUT=15.0

# ===========================
# Crisis Detection
# ===========================
# Model selection for crisis detection
CRISIS_MODEL=gemini  # Options: gemini, gpt4o

# Crisis severity thresholds
CRISIS_THRESHOLD_CRITICAL=0.8
CRISIS_THRESHOLD_HIGH=0.6
CRISIS_THRESHOLD_MEDIUM=0.4

# Alert configuration
ENABLE_CRISIS_ALERTS=true
CRISIS_ALERT_WEBHOOK=https://your-webhook-url/crisis
CRISIS_ALERT_EMAIL=emergency@hospital.com
CRISIS_ALERT_SMS=+1234567890

# ===========================
# A/B Testing
# ===========================
# Minimum samples for statistical significance
AB_TEST_MIN_SAMPLES=100

# Confidence interval for A/B test
AB_TEST_CONFIDENCE=0.95

# Performance improvement threshold to adopt chaining
AB_TEST_IMPROVEMENT_THRESHOLD=0.20  # 20% improvement

# ===========================
# Monitoring & Metrics
# ===========================
# Enable BigQuery metrics export
ENABLE_BIGQUERY_METRICS=false
BIGQUERY_PROJECT=senior-mhealth-471815
BIGQUERY_DATASET=ai_metrics
BIGQUERY_TABLE=chain_executions

# Metrics collection interval (seconds)
METRICS_INTERVAL=60

# Performance thresholds for alerts
PERF_ALERT_LATENCY_MS=5000
PERF_ALERT_ERROR_RATE=0.05

# ===========================
# Model Weights
# ===========================
# Weight distribution for final indicators
VOICE_WEIGHT=0.30
TEXT_WEIGHT=0.40
SINCNET_WEIGHT=0.30

# Indicator calculation weights
DRI_VOICE_WEIGHT=0.25
DRI_TEXT_WEIGHT=0.50
DRI_SINCNET_WEIGHT=0.25

SDI_VOICE_WEIGHT=0.40
SDI_TEXT_WEIGHT=0.30
SDI_SINCNET_WEIGHT=0.30

CFL_VOICE_WEIGHT=0.20
CFL_TEXT_WEIGHT=0.60
CFL_SINCNET_WEIGHT=0.20

ES_VOICE_WEIGHT=0.35
ES_TEXT_WEIGHT=0.35
ES_SINCNET_WEIGHT=0.30

OV_VOICE_WEIGHT=0.30
OV_TEXT_WEIGHT=0.30
OV_SINCNET_WEIGHT=0.40

# ===========================
# Resource Limits
# ===========================
# Maximum concurrent chain executions
MAX_CONCURRENT_CHAINS=10

# Memory limit per chain execution (MB)
CHAIN_MEMORY_LIMIT_MB=512

# Maximum chain execution time (seconds)
CHAIN_MAX_EXECUTION_TIME=120

# ===========================
# Logging
# ===========================
# Log level: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL=INFO

# Enable detailed chain execution logs
ENABLE_CHAIN_TRACE=false

# Log retention days
LOG_RETENTION_DAYS=30